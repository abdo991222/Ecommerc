import{a as v,b as a,c as C,d as x,e as F,f as m,g as w,h as O,i as S,j as I}from"./chunk-LFC7O3KD.js";import{f as k}from"./chunk-WB46C33D.js";import{r as y}from"./chunk-HG4UXZJC.js";import{Eb as n,Oa as u,Q as b,V as f,W as d,Ya as g,ib as p,pb as o,qb as t,rb as l,wb as h}from"./chunk-CPR7NIO3.js";import"./chunk-4CLCTAJ7.js";var s=class i{constructor(e){this.httpClient=e}getOrderApi(e,r){return this.httpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${e}?url=http://localhost:4200`,{shippingAddress:r})}static \u0275fac=function(r){return new(r||i)(f(y))};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})};var N=class i{activatedRoute=d(k);orderService=d(s);CartId="";checkOutForm=new F({details:new m(null,[a.required]),phone:new m(null,[a.required,a.pattern(/^(\+20|0)?1[0-2,5]{1}[0-9]{8}$/)]),city:new m(null,[a.required])});ngOnInit(){this.getCartId()}getCartId(){this.activatedRoute.paramMap.subscribe({next:e=>{this.CartId=e.get("id1")},error:e=>{console.log(e)}})}submitForm(){console.log(this.checkOutForm.value),this.CartId,this.orderService.getOrderApi(this.CartId,this.checkOutForm.value).subscribe({next:e=>{console.log(e),e.status==="success"&&open(e.session.url,"_self")},error:e=>{console.log(e)}})}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=g({type:i,selectors:[["app-checkout"]],decls:18,vars:2,consts:[[1,"bg-gray-100","w-[90%]","shadow","rounded","p-7","mx-auto"],[1,"text-center","text-green-600","text-4xl","py-3"],[3,"ngSubmit","formGroup"],[1,"mb-6"],["for","details",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","details","id","details",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","p-2.5","dark:placeholder-gray-400","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","phone","type","tel","id","phone",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","p-2.5","dark:placeholder-gray-400","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","city",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["formControlName","city","type","text","id","city",1,"bg-white","border","border-gray-300","text-sm","rounded-lg","block","w-full","p-2.5","dark:placeholder-gray-400","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"btn-main","py-2","px-10","text-center",3,"disabled"]],template:function(r,c){r&1&&(o(0,"section",0)(1,"h1",1),n(2,"Check Out"),t(),o(3,"form",2),h("ngSubmit",function(){return c.submitForm()}),o(4,"div",3)(5,"label",4),n(6,"details"),t(),l(7,"textarea",5),t(),o(8,"div",3)(9,"label",6),n(10,"phone"),t(),l(11,"input",7),t(),o(12,"div",3)(13,"label",8),n(14,"city"),t(),l(15,"input",9),t(),o(16,"button",10),n(17,"PayMent"),t()()()),r&2&&(u(3),p("formGroup",c.checkOutForm),u(13),p("disabled",!c.checkOutForm.valid))},dependencies:[I,w,v,C,x,O,S],encapsulation:2})};export{N as CheckoutComponent};
